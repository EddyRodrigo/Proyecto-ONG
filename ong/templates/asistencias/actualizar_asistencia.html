{%extends 'base.html'%}

{% block title %}VIDAS RADIANTES{% endblock title %}

{%block content%}
{% if user.is_superuser %}
<div>

    <h2>Editar Asistencia</h2>

    <form method="POST" class="formulario1">
        {% csrf_token %}

        <label>Evento</label>
        <select name="evento" required>
            {% for e in eventos %}
                <option value="{{ e.id_evento }}" {% if asistencia.evento.id_evento == e.id_evento %}selected{% endif %}>
                    {{ e.nombre_evento }}
                </option>
            {% endfor %}
        </select>

        <label>Voluntario</label>
        <select name="voluntario">
            <option value="">Ninguno</option>
            {% for v in voluntarios %}
                <option value="{{ v.id_voluntario }}" {% if asistencia.voluntario and asistencia.voluntario.id_voluntario == v.id_voluntario %}selected{% endif %}>
                    {{ v.nombre }} {{ v.apellido }}
                </option>
            {% endfor %}
        </select>

        <label>Inscrito</label>
        <select name="inscrito">
            <option value="">Ninguno</option>
            {% for i in inscritos %}
                <option value="{{ i.id_inscrito }}" {% if asistencia.inscrito and asistencia.inscrito.id_inscrito == i.id_inscrito %}selected{% endif %}>
                    {{ i.nombre }} {{ i.apellido }}
                </option>
            {% endfor %}
        </select>

        <label>Hora de llegada</label>
        <input type="datetime-local" name="hora_llegada" value="{{ asistencia.hora_llegada|date:'Y-m-d\\TH:i' }}">

        <label>Hora de salida</label>
        <input type="datetime-local" name="hora_salida" value="{{ asistencia.hora_salida|date:'Y-m-d\\TH:i' }}">

        <button class="guardar">Actualizar</button>
        <button class="cancelar"><a href="{% url 'listar_asistencias' %}">Volver</a></button>
    </form>
</div> 
{% else %}
    <p class="NoPermiso">No tienes permiso para actualizar asistencias.</p>
{% endif %}
{%endblock%}